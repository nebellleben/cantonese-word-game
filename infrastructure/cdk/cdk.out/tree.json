{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.234.1"},"children":{"CantoneseWordGameStack":{"id":"CantoneseWordGameStack","path":"CantoneseWordGameStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.234.1"},"children":{"VPC":{"id":"VPC","path":"CantoneseWordGameStack/VPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/VPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"CantoneseWordGameStack/VPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.234.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"CantoneseWordGameStack/VPC/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"CantoneseWordGameStack/VPC/PublicSubnet1"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"Acl":{"id":"Acl","path":"CantoneseWordGameStack/VPC/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.234.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"CantoneseWordGameStack/VPC/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC/PublicSubnet1"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"CantoneseWordGameStack/VPC/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VPCPublicSubnet1RouteTableFEE4B781"},"subnetId":{"Ref":"VPCPublicSubnet1SubnetB4246D30"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"CantoneseWordGameStack/VPC/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VPCIGWB7E252D3"},"routeTableId":{"Ref":"VPCPublicSubnet1RouteTableFEE4B781"}}}},"EIP":{"id":"EIP","path":"CantoneseWordGameStack/VPC/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC/PublicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"CantoneseWordGameStack/VPC/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["VPCPublicSubnet1EIP6AD938E8","AllocationId"]},"subnetId":{"Ref":"VPCPublicSubnet1SubnetB4246D30"},"tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC/PublicSubnet1"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"CantoneseWordGameStack/VPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.234.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"CantoneseWordGameStack/VPC/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"CantoneseWordGameStack/VPC/PublicSubnet2"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"Acl":{"id":"Acl","path":"CantoneseWordGameStack/VPC/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.234.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"CantoneseWordGameStack/VPC/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC/PublicSubnet2"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"CantoneseWordGameStack/VPC/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VPCPublicSubnet2RouteTable6F1A15F1"},"subnetId":{"Ref":"VPCPublicSubnet2Subnet74179F39"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"CantoneseWordGameStack/VPC/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VPCIGWB7E252D3"},"routeTableId":{"Ref":"VPCPublicSubnet2RouteTable6F1A15F1"}}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"CantoneseWordGameStack/VPC/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.234.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"CantoneseWordGameStack/VPC/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"CantoneseWordGameStack/VPC/PrivateSubnet1"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"Acl":{"id":"Acl","path":"CantoneseWordGameStack/VPC/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.234.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"CantoneseWordGameStack/VPC/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC/PrivateSubnet1"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"CantoneseWordGameStack/VPC/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VPCPrivateSubnet1RouteTableBE8A6027"},"subnetId":{"Ref":"VPCPrivateSubnet1Subnet8BCA10E0"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"CantoneseWordGameStack/VPC/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VPCPublicSubnet1NATGatewayE0556630"},"routeTableId":{"Ref":"VPCPrivateSubnet1RouteTableBE8A6027"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"CantoneseWordGameStack/VPC/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.234.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"CantoneseWordGameStack/VPC/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"CantoneseWordGameStack/VPC/PrivateSubnet2"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"Acl":{"id":"Acl","path":"CantoneseWordGameStack/VPC/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.234.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"CantoneseWordGameStack/VPC/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC/PrivateSubnet2"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"CantoneseWordGameStack/VPC/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VPCPrivateSubnet2RouteTable0A19E10E"},"subnetId":{"Ref":"VPCPrivateSubnet2SubnetCFCDAA7A"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"CantoneseWordGameStack/VPC/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VPCPublicSubnet1NATGatewayE0556630"},"routeTableId":{"Ref":"VPCPrivateSubnet2RouteTable0A19E10E"}}}}}},"IGW":{"id":"IGW","path":"CantoneseWordGameStack/VPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"CantoneseWordGameStack/VPC"}]}}},"VPCGW":{"id":"VPCGW","path":"CantoneseWordGameStack/VPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"VPCIGWB7E252D3"},"vpcId":{"Ref":"VPCB9E5F0B4"}}}}}},"FrontendRepository":{"id":"FrontendRepository","path":"CantoneseWordGameStack/FrontendRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.234.1","metadata":[]}},"BackendRepository":{"id":"BackendRepository","path":"CantoneseWordGameStack/BackendRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.234.1","metadata":[]}},"AppSecrets":{"id":"AppSecrets","path":"CantoneseWordGameStack/AppSecrets","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/AppSecrets/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Secrets for Cantonese Word Game application","generateSecretString":{"excludeCharacters":"\"@/\\","generateStringKey":"SECRET_KEY","secretStringTemplate":"{\"SECRET_KEY\":\"\"}"},"name":"cantonese-word-game-secrets"}}}}},"DBSubnetGroup":{"id":"DBSubnetGroup","path":"CantoneseWordGameStack/DBSubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.234.1","metadata":[]},"children":{"Default":{"id":"Default","path":"CantoneseWordGameStack/DBSubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for RDS PostgreSQL","dbSubnetGroupName":"cantonese-db-subnet-group","subnetIds":[{"Ref":"VPCPrivateSubnet1Subnet8BCA10E0"},{"Ref":"VPCPrivateSubnet2SubnetCFCDAA7A"}]}}}}},"DBSecurityGroup":{"id":"DBSecurityGroup","path":"CantoneseWordGameStack/DBSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/DBSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for RDS PostgreSQL","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"from CantoneseWordGameStackBackendSecurityGroupBAEE9094:5432":{"id":"from CantoneseWordGameStackBackendSecurityGroupBAEE9094:5432","path":"CantoneseWordGameStack/DBSecurityGroup/from CantoneseWordGameStackBackendSecurityGroupBAEE9094:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow backend to access RDS","fromPort":5432,"groupId":{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["BackendSecurityGroup96CF32F1","GroupId"]},"toPort":5432}}}}},"PostgreSQLInstance":{"id":"PostgreSQLInstance","path":"CantoneseWordGameStack/PostgreSQLInstance","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.234.1","metadata":[]},"children":{"Secret":{"id":"Secret","path":"CantoneseWordGameStack/PostgreSQLInstance/Secret","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/PostgreSQLInstance/Secret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"postgres_admin\"}","generateStringKey":"password","excludeCharacters":"\"@/\\"}}}},"Attachment":{"id":"Attachment","path":"CantoneseWordGameStack/PostgreSQLInstance/Secret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/PostgreSQLInstance/Secret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"CantoneseWordGameStackPostgreSQLInstanceSecret3256ACFC8ee0a797cad8a68dbeb85f8698cdb5bb"},"targetId":{"Ref":"PostgreSQLInstanceD9AD3CF0"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"Resource":{"id":"Resource","path":"CantoneseWordGameStack/PostgreSQLInstance/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","backupRetentionPeriod":1,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.micro","dbName":"cantonese_game","dbSubnetGroupName":{"Ref":"DBSubnetGroup"},"deletionProtection":false,"engine":"postgres","engineVersion":"15","masterUsername":"postgres_admin","masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"CantoneseWordGameStackPostgreSQLInstanceSecret3256ACFC8ee0a797cad8a68dbeb85f8698cdb5bb"},":SecretString:password::}}"]]},"maxAllocatedStorage":100,"multiAz":false,"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]}]}}}}},"Cluster":{"id":"Cluster","path":"CantoneseWordGameStack/Cluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/Cluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"cantonese-word-game-cluster"}}}}},"TaskExecutionRole":{"id":"TaskExecutionRole","path":"CantoneseWordGameStack/TaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.234.1","metadata":[]},"children":{"ImportTaskExecutionRole":{"id":"ImportTaskExecutionRole","path":"CantoneseWordGameStack/TaskExecutionRole/ImportTaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.234.1","metadata":[]}},"Resource":{"id":"Resource","path":"CantoneseWordGameStack/TaskExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CantoneseWordGameStack/TaskExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/TaskExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":[{"Ref":"AppSecretsA1997F2A"},{"Ref":"PostgreSQLInstanceSecretAttachmentF29BC406"}]},{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:ecr:us-east-1:",{"Ref":"AWS::AccountId"},":repository/cantonese-word-game-backend"]]},{"Fn::Join":["",["arn:aws:ecr:us-east-1:",{"Ref":"AWS::AccountId"},":repository/cantonese-word-game-frontend"]]}]},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["BackendLogGroupDA10F1B2","Arn"]},{"Fn::GetAtt":["FrontendLogGroupCE4F14E0","Arn"]}]}],"Version":"2012-10-17"},"policyName":"TaskExecutionRoleDefaultPolicyA84DD1B0","roles":[{"Ref":"TaskExecutionRole250D2532"}]}}}}}}},"BackendTaskRole":{"id":"BackendTaskRole","path":"CantoneseWordGameStack/BackendTaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.234.1","metadata":[]},"children":{"ImportBackendTaskRole":{"id":"ImportBackendTaskRole","path":"CantoneseWordGameStack/BackendTaskRole/ImportBackendTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.234.1","metadata":[]}},"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendTaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CantoneseWordGameStack/BackendTaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendTaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"AppSecretsA1997F2A"}}],"Version":"2012-10-17"},"policyName":"BackendTaskRoleDefaultPolicyD82ED08E","roles":[{"Ref":"BackendTaskRole65DD5890"}]}}}}}}},"FrontendLogGroup":{"id":"FrontendLogGroup","path":"CantoneseWordGameStack/FrontendLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/cantonese-word-game-frontend","retentionInDays":7}}}}},"BackendLogGroup":{"id":"BackendLogGroup","path":"CantoneseWordGameStack/BackendLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/cantonese-word-game-backend","retentionInDays":7}}}}},"BackendSecurityGroup":{"id":"BackendSecurityGroup","path":"CantoneseWordGameStack/BackendSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for backend service","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["VPCB9E5F0B4","CidrBlock"]},"ipProtocol":"tcp","fromPort":8000,"toPort":8000,"description":"Allow ALB to access backend"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"from CantoneseWordGameStackALBSecurityGroupA716A4D9:8000":{"id":"from CantoneseWordGameStackALBSecurityGroupA716A4D9:8000","path":"CantoneseWordGameStack/BackendSecurityGroup/from CantoneseWordGameStackALBSecurityGroupA716A4D9:8000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":8000,"groupId":{"Fn::GetAtt":["BackendSecurityGroup96CF32F1","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"toPort":8000}}}}},"BackendTaskDefinition":{"id":"BackendTaskDefinition","path":"CantoneseWordGameStack/BackendTaskDefinition","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendTaskDefinition/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Ref":"AWS::AccountId"},".dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/cantonese-word-game-backend:latest"]]},"name":"BackendContainer","portMappings":[{"containerPort":8000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"BackendLogGroupDA10F1B2"},"awslogs-stream-prefix":"backend","awslogs-region":"us-east-1"}},"environment":[{"name":"API_V1_PREFIX","value":"/api"},{"name":"PROJECT_NAME","value":"Cantonese Word Game API"},{"name":"ALGORITHM","value":"HS256"},{"name":"ACCESS_TOKEN_EXPIRE_MINUTES","value":"1440"},{"name":"CORS_ORIGINS","value":"http://cantonese-word-game-alb-1303843855.us-east-1.elb.amazonaws.com"}],"secrets":[{"name":"SECRET_KEY","valueFrom":{"Fn::Join":["",[{"Ref":"AppSecretsA1997F2A"},":SECRET_KEY::"]]}},{"name":"DATABASE_URL","valueFrom":{"Fn::Join":["",[{"Ref":"PostgreSQLInstanceSecretAttachmentF29BC406"},":uri::"]]}}]}],"cpu":"512","ephemeralStorage":{"sizeInGiB":30},"executionRoleArn":{"Fn::GetAtt":["TaskExecutionRole250D2532","Arn"]},"family":"CantoneseWordGameStackBackendTaskDefinitionF94ECCED","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["BackendTaskRole65DD5890","Arn"]}}}},"BackendContainer":{"id":"BackendContainer","path":"CantoneseWordGameStack/BackendTaskDefinition/BackendContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.234.1"}}}},"ALB":{"id":"ALB","path":"CantoneseWordGameStack/ALB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/ALB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"name":"cantonese-word-game-alb","scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]}],"subnets":[{"Ref":"VPCPublicSubnet1SubnetB4246D30"},{"Ref":"VPCPublicSubnet2Subnet74179F39"}],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"CantoneseWordGameStack/ALB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/ALB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB CantoneseWordGameStackALB266EF23E","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":8000,"toPort":8000,"description":"Allow from anyone on port 8000"},{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"to CantoneseWordGameStackBackendSecurityGroupBAEE9094:8000":{"id":"to CantoneseWordGameStackBackendSecurityGroupBAEE9094:8000","path":"CantoneseWordGameStack/ALB/SecurityGroup/to CantoneseWordGameStackBackendSecurityGroupBAEE9094:8000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["BackendSecurityGroup96CF32F1","GroupId"]},"fromPort":8000,"groupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","toPort":8000}}},"to CantoneseWordGameStackFrontendSecurityGroup9F43FBD4:80":{"id":"to CantoneseWordGameStackFrontendSecurityGroup9F43FBD4:80","path":"CantoneseWordGameStack/ALB/SecurityGroup/to CantoneseWordGameStackFrontendSecurityGroup9F43FBD4:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["FrontendSecurityGroup69AD9D5B","GroupId"]},"fromPort":80,"groupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","toPort":80}}}}},"BackendListener":{"id":"BackendListener","path":"CantoneseWordGameStack/ALB/BackendListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/ALB/BackendListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"BackendTargetGroupECF98930"}}],"loadBalancerArn":{"Ref":"ALBAEE750D2"},"port":8000,"protocol":"HTTP"}}}}},"FrontendListener":{"id":"FrontendListener","path":"CantoneseWordGameStack/ALB/FrontendListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/ALB/FrontendListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"FrontendTargetGroupED7B3E5D"}}],"loadBalancerArn":{"Ref":"ALBAEE750D2"},"port":80,"protocol":"HTTP"}}}}}}},"ALBDNSParameter":{"id":"ALBDNSParameter","path":"CantoneseWordGameStack/ALBDNSParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/ALBDNSParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"ALB DNS name for Cantonese Word Game","name":"/cantonese-word-game/alb-dns","type":"String","value":{"Fn::GetAtt":["ALBAEE750D2","DNSName"]}}}}}},"FrontendSecurityGroup":{"id":"FrontendSecurityGroup","path":"CantoneseWordGameStack/FrontendSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for frontend service","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow internet to access frontend"}],"vpcId":{"Ref":"VPCB9E5F0B4"}}}},"from CantoneseWordGameStackALBSecurityGroupA716A4D9:80":{"id":"from CantoneseWordGameStackALBSecurityGroupA716A4D9:80","path":"CantoneseWordGameStack/FrontendSecurityGroup/from CantoneseWordGameStackALBSecurityGroupA716A4D9:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":80,"groupId":{"Fn::GetAtt":["FrontendSecurityGroup69AD9D5B","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"toPort":80}}}}},"FrontendTaskDefinition":{"id":"FrontendTaskDefinition","path":"CantoneseWordGameStack/FrontendTaskDefinition","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.234.1","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"CantoneseWordGameStack/FrontendTaskDefinition/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.234.1","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"CantoneseWordGameStack/FrontendTaskDefinition/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.234.1","metadata":[]}},"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendTaskDefinition/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendTaskDefinition/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Ref":"AWS::AccountId"},".dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/cantonese-word-game-frontend:latest"]]},"name":"FrontendContainer","portMappings":[{"containerPort":80,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"FrontendLogGroupCE4F14E0"},"awslogs-stream-prefix":"frontend","awslogs-region":"us-east-1"}},"environment":[{"name":"VITE_API_BASE_URL","value":{"Fn::Join":["",["http://",{"Fn::GetAtt":["ALBAEE750D2","DNSName"]},":8000/api"]]}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["TaskExecutionRole250D2532","Arn"]},"family":"CantoneseWordGameStackFrontendTaskDefinition1358A764","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["FrontendTaskDefinitionTaskRole0DD17CB3","Arn"]}}}},"FrontendContainer":{"id":"FrontendContainer","path":"CantoneseWordGameStack/FrontendTaskDefinition/FrontendContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.234.1"}}}},"BackendTargetGroup":{"id":"BackendTargetGroup","path":"CantoneseWordGameStack/BackendTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.234.1"},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":8000,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":{"Ref":"VPCB9E5F0B4"}}}}}},"FrontendTargetGroup":{"id":"FrontendTargetGroup","path":"CantoneseWordGameStack/FrontendTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.234.1"},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":{"Ref":"VPCB9E5F0B4"}}}}}},"BackendService":{"id":"BackendService","path":"CantoneseWordGameStack/BackendService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.234.1","metadata":[]},"children":{"Service":{"id":"Service","path":"CantoneseWordGameStack/BackendService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"ClusterEB0386A7"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":120,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"BackendTargetGroupECF98930"},"containerName":"BackendContainer","containerPort":8000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"VPCPrivateSubnet1Subnet8BCA10E0"},{"Ref":"VPCPrivateSubnet2SubnetCFCDAA7A"}],"securityGroups":[{"Fn::GetAtt":["BackendSecurityGroup96CF32F1","GroupId"]}]}},"serviceName":"cantonese-word-game-backend-service","taskDefinition":{"Ref":"BackendTaskDefinitionEC224DE6"}}}}}},"FrontendService":{"id":"FrontendService","path":"CantoneseWordGameStack/FrontendService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.234.1","metadata":[]},"children":{"Service":{"id":"Service","path":"CantoneseWordGameStack/FrontendService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"ClusterEB0386A7"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":90,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"FrontendTargetGroupED7B3E5D"},"containerName":"FrontendContainer","containerPort":80}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"VPCPrivateSubnet1Subnet8BCA10E0"},{"Ref":"VPCPrivateSubnet2SubnetCFCDAA7A"}],"securityGroups":[{"Fn::GetAtt":["FrontendSecurityGroup69AD9D5B","GroupId"]}]}},"serviceName":"cantonese-word-game-frontend-service","taskDefinition":{"Ref":"FrontendTaskDefinition6CBC2B00"}}}}}},"BackendCPUAlarm":{"id":"BackendCPUAlarm","path":"CantoneseWordGameStack/BackendCPUAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendCPUAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when backend CPU utilization exceeds 80%","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ClusterName","value":{"Ref":"ClusterEB0386A7"}},{"name":"ServiceName","value":{"Fn::GetAtt":["BackendService7A4224EE","Name"]}}],"evaluationPeriods":2,"metricName":"CPUUtilization","namespace":"AWS/ECS","period":300,"statistic":"Average","threshold":80}}}}},"BackendMemoryAlarm":{"id":"BackendMemoryAlarm","path":"CantoneseWordGameStack/BackendMemoryAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendMemoryAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when backend memory utilization exceeds 80%","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ClusterName","value":{"Ref":"ClusterEB0386A7"}},{"name":"ServiceName","value":{"Fn::GetAtt":["BackendService7A4224EE","Name"]}}],"evaluationPeriods":2,"metricName":"MemoryUtilization","namespace":"AWS/ECS","period":300,"statistic":"Average","threshold":80}}}}},"FrontendCPUAlarm":{"id":"FrontendCPUAlarm","path":"CantoneseWordGameStack/FrontendCPUAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendCPUAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when frontend CPU utilization exceeds 80%","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ClusterName","value":{"Ref":"ClusterEB0386A7"}},{"name":"ServiceName","value":{"Fn::GetAtt":["FrontendServiceBC94BA93","Name"]}}],"evaluationPeriods":2,"metricName":"CPUUtilization","namespace":"AWS/ECS","period":300,"statistic":"Average","threshold":80}}}}},"FrontendMemoryAlarm":{"id":"FrontendMemoryAlarm","path":"CantoneseWordGameStack/FrontendMemoryAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendMemoryAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when frontend memory utilization exceeds 80%","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ClusterName","value":{"Ref":"ClusterEB0386A7"}},{"name":"ServiceName","value":{"Fn::GetAtt":["FrontendServiceBC94BA93","Name"]}}],"evaluationPeriods":2,"metricName":"MemoryUtilization","namespace":"AWS/ECS","period":300,"statistic":"Average","threshold":80}}}}},"BackendTargetHealthAlarm":{"id":"BackendTargetHealthAlarm","path":"CantoneseWordGameStack/BackendTargetHealthAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/BackendTargetHealthAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when backend target health is unhealthy","comparisonOperator":"LessThanThreshold","dimensions":[{"name":"LoadBalancer","value":{"Fn::Join":["",[{"Fn::Select":[1,{"Fn::Split":["/",{"Ref":"ALBBackendListener545F3CFF"}]}]},"/",{"Fn::Select":[2,{"Fn::Split":["/",{"Ref":"ALBBackendListener545F3CFF"}]}]},"/",{"Fn::Select":[3,{"Fn::Split":["/",{"Ref":"ALBBackendListener545F3CFF"}]}]}]]}},{"name":"TargetGroup","value":{"Fn::GetAtt":["BackendTargetGroupECF98930","TargetGroupFullName"]}}],"evaluationPeriods":1,"metricName":"HealthyHostCount","namespace":"AWS/ApplicationELB","period":300,"statistic":"Average","threshold":1}}}}},"FrontendTargetHealthAlarm":{"id":"FrontendTargetHealthAlarm","path":"CantoneseWordGameStack/FrontendTargetHealthAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/FrontendTargetHealthAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when frontend target health is unhealthy","comparisonOperator":"LessThanThreshold","dimensions":[{"name":"LoadBalancer","value":{"Fn::Join":["",[{"Fn::Select":[1,{"Fn::Split":["/",{"Ref":"ALBFrontendListenerD31C403C"}]}]},"/",{"Fn::Select":[2,{"Fn::Split":["/",{"Ref":"ALBFrontendListenerD31C403C"}]}]},"/",{"Fn::Select":[3,{"Fn::Split":["/",{"Ref":"ALBFrontendListenerD31C403C"}]}]}]]}},{"name":"TargetGroup","value":{"Fn::GetAtt":["FrontendTargetGroupED7B3E5D","TargetGroupFullName"]}}],"evaluationPeriods":1,"metricName":"HealthyHostCount","namespace":"AWS/ApplicationELB","period":300,"statistic":"Average","threshold":1}}}}},"RDSCPUAlarm":{"id":"RDSCPUAlarm","path":"CantoneseWordGameStack/RDSCPUAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/RDSCPUAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when RDS CPU utilization exceeds 80%","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"DBInstanceIdentifier","value":{"Ref":"PostgreSQLInstanceD9AD3CF0"}}],"evaluationPeriods":2,"metricName":"CPUUtilization","namespace":"AWS/RDS","period":300,"statistic":"Average","threshold":80}}}}},"RDSConnectionsAlarm":{"id":"RDSConnectionsAlarm","path":"CantoneseWordGameStack/RDSConnectionsAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/RDSConnectionsAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alert when RDS connections exceed 50","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"DBInstanceIdentifier","value":{"Ref":"PostgreSQLInstanceD9AD3CF0"}}],"evaluationPeriods":2,"metricName":"DatabaseConnections","namespace":"AWS/RDS","period":300,"statistic":"Average","threshold":50}}}}},"MonitoringDashboard":{"id":"MonitoringDashboard","path":"CantoneseWordGameStack/MonitoringDashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.234.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CantoneseWordGameStack/MonitoringDashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.234.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"widgets\":[{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Backend CPU Utilization\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ECS\",\"CPUUtilization\",\"ClusterName\",\"",{"Ref":"ClusterEB0386A7"},"\",\"ServiceName\",\"",{"Fn::GetAtt":["BackendService7A4224EE","Name"]},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":6,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Backend Memory Utilization\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ECS\",\"MemoryUtilization\",\"ClusterName\",\"",{"Ref":"ClusterEB0386A7"},"\",\"ServiceName\",\"",{"Fn::GetAtt":["BackendService7A4224EE","Name"]},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":12,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Frontend CPU Utilization\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ECS\",\"CPUUtilization\",\"ClusterName\",\"",{"Ref":"ClusterEB0386A7"},"\",\"ServiceName\",\"",{"Fn::GetAtt":["FrontendServiceBC94BA93","Name"]},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":18,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Frontend Memory Utilization\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ECS\",\"MemoryUtilization\",\"ClusterName\",\"",{"Ref":"ClusterEB0386A7"},"\",\"ServiceName\",\"",{"Fn::GetAtt":["FrontendServiceBC94BA93","Name"]},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RDS CPU Utilization\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/RDS\",\"CPUUtilization\",\"DBInstanceIdentifier\",\"",{"Ref":"PostgreSQLInstanceD9AD3CF0"},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":6,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RDS Connections\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/RDS\",\"DatabaseConnections\",\"DBInstanceIdentifier\",\"",{"Ref":"PostgreSQLInstanceD9AD3CF0"},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":12,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"ALB Request Count\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApplicationELB\",\"RequestCount\",\"LoadBalancer\",\"",{"Fn::GetAtt":["ALBAEE750D2","LoadBalancerFullName"]},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":18,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"ALB Target Response Time\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApplicationELB\",\"TargetResponseTime\",\"LoadBalancer\",\"",{"Fn::Select":[1,{"Fn::Split":["/",{"Ref":"ALBBackendListener545F3CFF"}]}]},"/",{"Fn::Select":[2,{"Fn::Split":["/",{"Ref":"ALBBackendListener545F3CFF"}]}]},"/",{"Fn::Select":[3,{"Fn::Split":["/",{"Ref":"ALBBackendListener545F3CFF"}]}]},"\",\"TargetGroup\",\"",{"Fn::GetAtt":["BackendTargetGroupECF98930","TargetGroupFullName"]},"\"]],\"yAxis\":{}}}]}"]]},"dashboardName":"CantoneseWordGame-Dashboard"}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"CantoneseWordGameStack/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.234.1"}},"FrontendECRRepository":{"id":"FrontendECRRepository","path":"CantoneseWordGameStack/FrontendECRRepository","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.234.1"}},"BackendECRRepository":{"id":"BackendECRRepository","path":"CantoneseWordGameStack/BackendECRRepository","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.234.1"}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"CantoneseWordGameStack/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.234.1"}},"SecretsManagerSecret":{"id":"SecretsManagerSecret","path":"CantoneseWordGameStack/SecretsManagerSecret","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.234.1"}},"CloudWatchDashboard":{"id":"CloudWatchDashboard","path":"CantoneseWordGameStack/CloudWatchDashboard","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.234.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"CantoneseWordGameStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"CantoneseWordGameStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.234.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CantoneseWordGameStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.234.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CantoneseWordGameStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.234.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}}}}}